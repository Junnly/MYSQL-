(# MYSQL-

数据库结构：
*.数据库的逻辑设计要结合范式化和反范式化设计。
 1.范式化的优点：尽量可以减少数据冗余，数据表更新快体积小，范式化的更新操作比反范式化更快，范式化的表通常比范式化更小。
           缺点：对于查询需要关联多个表，更难的进行索引查询。
 2.反范式化的优点：可以减少表的关联，对查询可以进行更好的索引优化。
            缺点：存在数据冗余及数据维护异常，对数据的修改需要更多的成本。

**.数据库的物理设计：
1.定义数据库，表，及字段的命名规范
  可读性原则：定义名称遵循可读性，表意性 ，长名(尽量不使用缩写)原则.
2.选择合适的存储引擎
***.MYSQL语句：
     设置时区：set time_zone = '+10.00';
     建表：create table t(datetime,d2 timestamp);
     // datetime 不随时区的改变而改变，timestamp 此时间的其他时区时间，随时区的改变而改变。
     插入值：insert into (表名)t values();
     查询：select * from t ;
     删除表：drop  table t;
     给单个列插入值：insert into t(列名） values(要插入的值）；
 日期: date  占用字节数最少 3个 还可以利用日期时间函数进行计算  1000-01 -01
 时间：time  存储时间数据  HH:MM:SS
 注意事项：不要使用字符串类型来存储日期时间数据
               优点：
               日期时间类型通常比字符串占用的存储空间小，在进行查找过滤是可以用来利用时间对比，有丰富的处理函数，方便对时期类型进行日期计算。
          使用int存储时间日期不如使用TimeStamp (年月日小时分秒）。
       
****. MYSQL的复制功能：基于主库的二进制日志王成德，所以是异步复制，也就是说在同一时间主库和备库数据存在不一致，
          1. 解决了什么问题：实现了在不同的服务器上的数据分布，
          2. 实现数据读取的负载均衡，
          3.增加了数据的安全性，复制并不能代替备份，但是可以利用备库的备份来减少主库的负载。
          4. 实现数据库的高可用和故障切换
          5.实现数据库的在线升级
          
*****.在mysql中查询二进制日志的格式（row or statement)：show variables like 'binlog_format';
  将row格式改成段格式statement:set session binlog_format = statement;
  刷新binlog文件：flush logs;
  二进制日志格式 ： row ,statement, mixed 
        不同格式对MySQL复制的影响：
                   基于sql语句的复制（SBR）
                                 优点：生成的日志量少，节约网络传输IO；
                                        并不强制要求主从数据库的表定义完全一致；
                                        相比预基于行的复制方式更为灵活。
                                  缺点：对于非确定性事件，无法保证主从复制数据的一致性；
                                        对于存储过程，触发器，自定义函数进行的修改也可能造成数据的不一致性；
                                        相比于基于行的复制方式在从上执行是需要更多的行锁。
        
                    基于行的复制（RBR)
                                优点: 可以应用于任何SQL的复制包括非确定函数，存储过程等；
                                      可以减少数据库锁的使用；
                                缺点：要求主从数据库的表结构相同，否则可能会中断复制；
                                     无法在从服务器上单独执行触发器；
      综合考虑 : 推荐使用基于行的复制（RBR), 因为这种复制对主从数据的一致性更有保证。
     
******. MYSQL的复制工作方式： 
      （ 在进行数据服务器配置的时候，要在配置的时候把二进制日志开启）
      1.主服务器将变更写入二进制日志
      2.从服务器读取主的二进制日志变更写入到relay_log中
      3.在从上重放relay_log 中的日志（基于SQL的日志是在从库上重新执行记录的SQL；
                                    基于行的日志则是在从库上直接应用对数据库行的修改。）
                                    
 *******************************5.5节*************************************
        
        
        
        
        
        
        
